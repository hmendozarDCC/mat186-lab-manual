---
title: "Solution - Lab 15: Non-parametric methods"
subtitle: "MAT 186: Introduction to Data Science"
format:
  html:
    toc: true
    toc-location: right
---

<script>
  var password = "MAT186LABSOER";
  var res = prompt("DCC Instructor Key Required:");
  if (res != password) {
    alert("Incorrect password. Access denied.");
    window.location.href = "../index.html";
  }
</script>

## Non-parametric methods - Official Solutions
To solve Lab 15, we focus on Non-parametric Testing. This lab is crucial for real-world data science because many datasets (like your SUNY enrollment data) are skewed and do not follow a "Normal" distribution. We will compare the standard T-test with the Wilcoxon Rank-Sum test to see how they handle skewed data differently.
::: {.callout-note}
### Instructor Note
Add your specific DCC lab answers below this box.
:::
## Lab 15 Official Solutions: Wilcoxon vs. T-Test

In this final lab, we investigate how to handle highly skewed data by comparing parametric and non-parametric tests.

### Task 1: Loading and Filtering Data
We prepare our data by cleaning the enrollment numbers and filtering for two distinct sectors: **Community Colleges** and **Doctoral Degree Granting Institutions**.

```{r}
#| message: false
#| warning: false
library(tidyverse)

# Load the data
ny_data <- read_csv("../data/race_ny.csv")

# Clean data: 
# Remove commas and filter for two groups
comparison_data <- ny_data |>
  mutate(total_enroll = as.numeric(gsub(",", "", `Total Enrollment`))) |>
  filter(`Institution Sector` %in% c("Community Colleges", "Doctoral Degree Granting Institutions")) |>
  rename(sector = `Institution Sector`)
```

### Task 2: Visualizing Skewness
We use a boxplot to visualize the distribution of enrollment.

```{r}
#| label: fig-boxplot-skew
#| fig-cap: "Boxplot comparing Total Enrollment across two SUNY sectors."
#| fig-alt: "A boxplot showing Community Colleges have much higher total enrollment than Doctoral Institutions. Both groups show potential outliers and a non-symmetrical distribution, indicating skewness."
ggplot(comparison_data, aes(x = sector, y = total_enroll, fill = sector)) +
  geom_boxplot(alpha = 0.7) +
  scale_fill_manual(values = c("darkgreen", "purple")) +
  labs(title = "Enrollment Distribution by Sector",
       x = "Sector",
       y = "Total Students") +
  theme_minimal() +
  guides(fill = "none")
```

### Task 3 & 4: Running the Tests
We run both a Wilcoxon Rank-Sum Test (which compares medians/ranks) and a T-Test (which compares means).

**The Wilcoxon Test (Non-parametric)**

```{r}
#| label: wilcox-test
wilcox_results <- wilcox.test(total_enroll ~ sector, data = comparison_data)
wilcox_results
```

**The T-Test (Parametric)**

```{r}
#| label: t-test
t_results <- t.test(total_enroll ~ sector, data = comparison_data)
t_results
```


### Task 5: Comparison and Reflection

**P-Value Comparison:**

* **Wilcoxon P-value: r format.pval(wilcox_results$p.value, digits = 4)

* **T-Test P-value: r format.pval(t_results$p.value, digits = 4)

**Reflection:** In this specific dataset, both p-values are extremely small (well below 0.05), so both tests lead us to reject the null hypothesis. However, I trust the Wilcoxon test more for this specific data.

**Why?** The enrollment data is highly skewed and contains outliers (massive differences between campus sizes). The T-test assumes the data follows a normal distribution and is sensitive to outliers because it relies on the mean. The Wilcoxon test is more robust because it uses the ranks of the data rather than the raw values, making it the more appropriate "accessible" choice for messy, real-world data that isn't bell-shaped.
<br><br>

***

::: {.content-block}
<center>
<a href="../solutions.html" class="btn btn-primary btn-lg" role="button">üè† Back to Solutions Hub</a>
</center>
:::

