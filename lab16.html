<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lab 16: Analysis of variance(ANOVA) - MAT 186: Introduction to Data Science Lab Manual</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="accessibility.html">Accessibility Statement</a></li><li class="chapter-item expanded affix "><a href="glossary.html">Glossary</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="lab1.html"><strong aria-hidden="true">1.</strong> Lab 1: R and RStudio Installation</a></li><li class="chapter-item expanded "><a href="lab2.html"><strong aria-hidden="true">2.</strong> Lab 2: RStudio Projects and Quarto</a></li><li class="chapter-item expanded "><a href="lab3.html"><strong aria-hidden="true">3.</strong> Lab 3: Mathematical Notation in Quarto</a></li><li class="chapter-item expanded "><a href="lab4.html"><strong aria-hidden="true">4.</strong> Lab 4: GitHub Repository</a></li><li class="chapter-item expanded "><a href="lab5.html"><strong aria-hidden="true">5.</strong> Lab 5: Getting Data into R</a></li><li class="chapter-item expanded "><a href="lab6.html"><strong aria-hidden="true">6.</strong> Lab 6: Data Collection and Sources</a></li><li class="chapter-item expanded "><a href="lab7.html"><strong aria-hidden="true">7.</strong> Lab 7: Cleaning Data</a></li><li class="chapter-item expanded "><a href="lab8.html"><strong aria-hidden="true">8.</strong> Lab 8: Data Exploration and Visualization</a></li><li class="chapter-item expanded "><a href="lab9.html"><strong aria-hidden="true">9.</strong> Lab 9: Probability and Sampling Distributions</a></li><li class="chapter-item expanded "><a href="lab10.html"><strong aria-hidden="true">10.</strong> Lab 10: Statistical inference for one mean</a></li><li class="chapter-item expanded "><a href="lab11.html"><strong aria-hidden="true">11.</strong> Lab 11: Statistical inference for one proportion</a></li><li class="chapter-item expanded "><a href="lab12.html"><strong aria-hidden="true">12.</strong> Lab 12: Statistical inference for two means</a></li><li class="chapter-item expanded "><a href="lab13.html"><strong aria-hidden="true">13.</strong> Lab 13: Statistical inference for two proportions</a></li><li class="chapter-item expanded "><a href="lab14.html"><strong aria-hidden="true">14.</strong> Lab 14: Bootstrapping</a></li><li class="chapter-item expanded "><a href="lab15.html"><strong aria-hidden="true">15.</strong> Lab 15: Non-parametric methods for hypothesis testing</a></li><li class="chapter-item expanded "><a href="lab16.html" class="active"><strong aria-hidden="true">16.</strong> Lab 16: Analysis of variance(ANOVA)</a></li><li class="chapter-item expanded "><a href="lab17.html"><strong aria-hidden="true">17.</strong> Lab 17: Regression models</a></li><li class="chapter-item expanded "><a href="lab3.html"><strong aria-hidden="true">18.</strong> Lab : Data Visualization</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MAT 186: Introduction to Data Science Lab Manual</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/your-username/mat186-lab-manual" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="lab-16-analysis-of-variance-anova"><a class="header" href="#lab-16-analysis-of-variance-anova">Lab 16: Analysis of Variance (ANOVA)</a></h1>
<h2 id="learning-objectives"><a class="header" href="#learning-objectives">Learning Objectives</a></h2>
<ul>
<li>Understand when to use <strong>ANOVA</strong> instead of multiple t-tests.</li>
<li>State the Null ($H_0$) and Alternative ($H_a$) hypotheses for multiple groups.</li>
<li>Conduct a <strong>One-Way ANOVA</strong> in R.</li>
<li>Perform <strong>Post-hoc testing</strong> (Tukey’s HSD) to find exactly where differences lie.</li>
</ul>
<hr />
<h2 id="part-1-why-anova"><a class="header" href="#part-1-why-anova">Part 1: Why ANOVA?</a></h2>
<p>If you have three groups (e.g., Freshman, Sophomores, Juniors) and you want to compare their average GPA, you <em>could</em> run three separate t-tests. However, every time you run a test, there is a 5% chance of being wrong. By the third test, your error rate has ballooned!</p>
<p><strong>ANOVA</strong> tests all groups at once, keeping our error rate at 5%.</p>
<ul>
<li><strong>Null Hypothesis ($H_0$):</strong> All group means are equal ($\mu_1 = \mu_2 = \mu_3$).</li>
<li><strong>Alternative Hypothesis ($H_a$):</strong> At least one group mean is different.</li>
</ul>
<hr />
<h2 id="part-2-visualizing-multiple-groups"><a class="header" href="#part-2-visualizing-multiple-groups">Part 2: Visualizing Multiple Groups</a></h2>
<p>With ANOVA, side-by-side boxplots are essential. They allow us to see if the "spread" within groups is smaller than the "distance" between groups.</p>
<pre><code class="language-r">library(tidyverse)

# Example: Do different 'eye colors' in Star Wars have different average heights?
# We'll filter for the most common eye colors
eye_data &lt;- starwars |&gt; 
  filter(eye_color %in% c("blue", "brown", "yellow", "orange")) |&gt;
  drop_na(height)

ggplot(eye_data, aes(x = eye_color, y = height, fill = eye_color)) +
  geom_boxplot() +
  theme_minimal() +
  labs(title = "Height Distribution by Eye Color")
</code></pre>
<hr />
<h2 id="part-3-running-the-anova-in-r"><a class="header" href="#part-3-running-the-anova-in-r">Part 3: Running the ANOVA in R</a></h2>
<p>We use the <code>aov()</code> function. Like the t-test, we use the formula <code>numeric_variable ~ categorical_variable</code>.</p>
<pre><code class="language-r"># 1. Fit the ANOVA model
model &lt;- aov(height ~ eye_color, data = eye_data)

# 2. View the summary table
summary(model)
</code></pre>
<h3 id="how-to-read-the-anova-table"><a class="header" href="#how-to-read-the-anova-table">How to read the ANOVA Table:</a></h3>
<ul>
<li><strong>Df:</strong> Degrees of freedom.</li>
<li><strong>F value:</strong> The ratio of variance <em>between</em> groups to variance <em>within</em> groups. A large F-value usually leads to a small p-value.</li>
<li><strong>Pr(&gt;F):</strong> This is your <strong>p-value</strong>. If it is &lt; 0.05, we reject the Null.</li>
</ul>
<hr />
<h2 id="part-4-post-hoc-testing-tukeys-hsd"><a class="header" href="#part-4-post-hoc-testing-tukeys-hsd">Part 4: Post-hoc Testing (Tukey's HSD)</a></h2>
<p>If your ANOVA p-value is significant, you know <em>someone</em> is different, but you don't know who. We use <strong>Tukey’s Honest Significant Difference</strong> to compare every possible pair.</p>
<pre><code class="language-r"># Running Tukey's HSD
TukeyHSD(model)
</code></pre>
<hr />
<div class="dcc-important">
**Lab Task 16:**
1. Identify a categorical variable in your data with **3 or more groups** (e.g., County, Year, or Category).
2. Create a **Boxplot** comparing a numeric variable across these groups.
3. Run the `aov()` function and look at the `summary()`.
4. **Conclusion:** * If p > 0.05: State that there is no significant difference between any groups.
   * If p < 0.05: Run `TukeyHSD()` and identify which specific pairs are actually different.
</div>
<hr />
<h2 id="pro-tip-the-equal-variance-assumption"><a class="header" href="#pro-tip-the-equal-variance-assumption">Pro-Tip: The "Equal Variance" Assumption</a></h2>
<p>ANOVA assumes that the "spread" (variance) is roughly the same for all groups. If one boxplot is massive and another is tiny, the math might be unreliable. In those cases, we go back to the <strong>Non-parametric</strong> methods from Lab 15!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="lab15.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="lab17.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="lab15.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="lab17.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
